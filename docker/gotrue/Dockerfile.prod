# GoTrue - Production Dockerfile
FROM supabase/gotrue:v2.31.0

# Configure the service with environment variables that will be injected at runtime
ENV GOTRUE_DB_DRIVER=postgres
ENV GOTRUE_API_HOST=0.0.0.0
ENV GOTRUE_API_PORT=9999

# Expose GoTrue port
EXPOSE 9999

# Health check
HEALTHCHECK --interval=10s --timeout=5s --retries=3 \
    CMD curl -f http://localhost:9999/health || exit 1